#include "hardware.h"

int main() {

	init_hardware();

	uint16_t prev_x = 0;
	uint16_t prev_y = 0;

	uint16_t new_x = 0;
	uint16_t new_y = 0;

	uint8_t sprite[384] = {
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x00,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x00,0x90,0x09,0x0F,0xF0,0xFF,0x00,0x90,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0xFF,0x00,0x90,0xFF,0x0F,0xF0,0xFF,0x00,0x90,0xFF,0x0F,0xF0,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0xFF,0x00,0x90,0x09,0x0F,0xF0,0xFF,0x0F,0xF0,0x09,0x0F,0xF0,0xFF,0x0F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x09,0x0F,0xF0,0xFF,0x0F,0xF0,0xFF,0x00,0x90,0x09,0x00,0x90,0x09,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0xF0,0xFF,0x0F,0xF0,0xFF,0x0F,0xF0,0xFF,0x0F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x00,0x90,0xF0,0x00,0x90,0x09,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x09,0x00,0x90,0xF0,0x00,0x90,0x09,0x0F,0x00,0x09,0x00,0x90,0x09,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x00,0x90,0x09,0x00,0x90,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0x09,0x00,0x90,0x09,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x0F,0xF0,0x09,0x0F,0x00,0xFF,0x0F,0x00,0xF0,0x0F,0xF0,0xF0,0x00,0x90,0xFF,0x0F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x0F,0xF0,0xFF,0x0F,0x00,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0xF0,0x0F,0xF0,0xFF,0x0F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x0F,0xF0,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0xF0,0x0F,0x00,0xFF,0x0F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x0F,0x00,0xF0,0x00,0x00,0x00,0x0F,0x00,0xF0,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x90,0x09,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x00,0x90,0x09,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x00,0x90,0x09,0x00,0x90,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x00,0x90,0x09,0x00,0x90,0x00,0x00,0x00
	};

	while (1) {

		new_x = get_x1024() >> 4;
		new_y = get_y1024() >> 4;

		if (new_x != prev_x || new_y != prev_y) {

			// clear
			fill_rect(prev_x, prev_y, 16, 16, 0x00, 0x00, 0x00);

			// draw square
			draw_sprite(prev_x = new_x, prev_y = new_y, 16, 16, sprite);
		}

		sleep();
	}
}
